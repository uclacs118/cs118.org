---
layout: ../../layouts/Assigment.astro
title: "Homework 4: Routing/Link Layer"
dueDate: 2025-03-09 23:59:00
---

Submit your homework solution PDF to Gradescope in any format you please;
however, make sure that each **question part** is on its own page.

# Question 1: Routing (25 points)

Consider the network shown below. The costs of all links are initially: 

    \\(c(x,y) = 4\\)  
    \\(c(x,z) = 50\\)   
    \\(c(y,w) = 1\\)   
    \\(c(z,w) = 1\\)  
    \\(c(y,z) = 3\\)  

![q1](/imgs/hw4p1.svg)

1. **(8 points)** Suppose link-state routing is used. Show the intermediate steps to compute the shortest path from \\(x\\) to each of the other nodes.

2. Suppose distance-vector routing is used. 

    a. **(6 points)** When distance vector routing is stabilized, router \\(w\\), \\(y\\), and \\(z\\) inform their distances to \\(x\\) to each other. What distance values do they tell each other?

    b. **(8 points)** Now suppose that the link cost between \\(x\\) and \\(y\\) increases to \\(60\\). Can \\(y\\), \\(z\\), \\(w\\) settle their optimal distances to \\(x\\) within several (say, \\(\le5\\)) iterations? Why or why not?

    c. **(3 points)** Will the distance tables eventually reach a stabilized state? Why or why not?


# Question 2: BGP1 (25 points)

Consider the network shown below.  
Suppose AS3 and AS2 are running OSPF for their intra-AS routing protocol.  
Suppose AS1 and AS4 are running RIP for their intra-AS routing protocol.  
Suppose eBGP and iBGP are used for the inter-AS routing protocol.  
Initially suppose there is no physical link (the dotted line between 4a and 2c) between AS2 and AS4.  

![q2](/imgs/hw4p2.svg)

At some time T, the prefix \\(x\\) appears in AS4, adjacent to the router 4a.
From which routing protocol (OSPF, RIP, eBGP, or iBGP):

1. **(3 points)** Router 4b learns about prefix \\(x\\)?
2. **(3 points)** Router 3c learns about prefix \\(x\\)?
3. **(3 points)** Router 1c learns about prefix \\(x\\)?
4. **(3 points)** Router 1d learns about prefix \\(x\\)?

Once router 1d learns about \\(x\\) will put an entry \\((x, I)\\) in its forwarding table:

5. **(4 points)** Will \\(I\\) be equal to \\(I_1\\) or \\(I_2\\) for this entry? Explain why in one sentence.
6. **(5 points)** Now suppose that there is a physical link between AS2 and AS4, shown by the dotted line.
Suppose router 1d learns that \\(x\\) is accessible via AS2 as well as via AS3.
Will \\(I\\) be set to \\(I_1\\) or \\(I_2\\)? Explain why in one sentence.
7. **(4 points)** Now suppose there is another AS, called AS5, which lies on the path between AS2 and AS4 (not shown in the figure).
Suppose router 1d learns that \\(x\\) is accessible via AS2 AS5 AS4 as well as via AS3 AS4.
Will \\(I\\) be set to \\(I_1\\) or \\(I_2\\)? Explain why in one sentence.


# Question 3: BGP2 (25 points)

Consider the following topology.  
The cost metric of a link denotes the one-way propagation delay on the link in msec (assuming the delays are symmetric).  
The two ISPs ISP 1 and ISP 2 are peers.  
CIDR is used for addressing and BGP is used for inter-domain routing.  
Assume that both ISPs always try to enforce hot-potato routing above all other routing policies.  

![q3](/imgs/hw4p3.svg)

1. **(13 points)** What is the one-way propagation delay between Customer 1 and Customer 2?
2. **(12 points)** Is the routing between two customers symmetric or asymmetric?


# Question 4: CSMA/CD (25 points)


In this problem, you will derive the efficiency of a CSMA/CD like multiple access protocol.  
In this protocol, time is slotted and all adapters are synchronized to the slots.  
Unlike slotted ALOHA, however, the length of a slot (in seconds) is much less than a frame time (the time to transmit a frame).  
Let \\(S\\) be the length of a slot.  
Suppose all frames are of constant length \\(L = kRS\\), where \\(R\\) is the transmission rate of the channel and \\(k\\) is a large integer.  
Suppose there are \\(N\\) nodes, each with an infinite number of frames to send.  
We also assume that \\(d_\{prop\} < S\\), so that all nodes can detect a collision before the end of a slot time.  
The protocol is as follows:

- If no node has possession of the channel for a given slot, all nodes contend for the channel; in particular, each node transmits in the slot with probability \\(p\\). If exactly one node transmits in the slot, that node takes possession of the channel for the subsequent \\(k-1\\) slots and transmits its frame.
- If some node has possession of the channel, all other nodes refrain from transmitting until the node that possesses the channel has finished transmitting its frame. Once this node has transmitted its frame, all nodes contend for the channel.

Note that the channel alternates between two states: the productive state, which lasts exactly \\(k\\) slots, and the non-productive state, which lasts for a random number of slots.  
The channel efficiency is defined as the ratio of \\(k/(k+x)\\), where \\(x\\) is the expected number of consecutive non-productive slots.

1. **(13 points)** For fixed \\(N\\) and \\(p\\), determine the efficiency of this protocol.
2. **(12 points)** For fixed \\(N\\), determine the \\(p\\) that maximizes the efficiency.


# Question 5: ARP/Self-Learning (0 points)

Consider the following network topology with specified MAC addresses for network interfaces and the configured IP addresses:

![q5](/imgs/hw4p5.svg)

Assume the network mask for both subnetworks is 255.255.255.0.

1. Assume that routing tables are properly configured and the network just started (i.e., all ARP caches and switch tables are empty), fill out a table to enumerate Ethernet frames (in chronological order) needed for node B to send an IP packet to 192.168.0.2 and receive a response back.

2. Assume that the previous operation is done, fill out a table to enumerate Ethernet frames (in chronological order) for node B to send a packet to 192.168.1.253 and receive a reply.
